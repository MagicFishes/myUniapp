{"version":3,"file":"index.js","sources":["components/custom-tab-bar/index.vue","D:/hbuilderX/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/QzovVXNlcnMvMTgxODUvRGVza3RvcC9hbnlkb29yVHJpcFVuaWFwcC9hbnlkb29yVHJpcFVuaWFwcC9jb21wb25lbnRzL2N1c3RvbS10YWItYmFyL2luZGV4LnZ1ZQ"],"sourcesContent":["<template>\r\n\t<view\r\n\t\tclass=\"custom-tab-bar\"\r\n\t\t:class=\"{ 'has-border': border }\"\r\n\t\t:style=\"{ background }\"\r\n\t>\r\n\t\t<view class=\"tab-items\">\r\n\t\t\t<view\r\n\t\t\t\tv-for=\"item in items\"\r\n\t\t\t\t:key=\"item.key\"\r\n\t\t\t\tclass=\"tab-item\"\r\n\t\t\t\t:class=\"{ active: resolvedActive === item.key }\"\r\n\t\t\t\t@click=\"handleSelect(item)\"\r\n\t\t\t>\r\n\t\t\t\t<slot\r\n\t\t\t\t\tname=\"icon\"\r\n\t\t\t\t\t:item=\"item\"\r\n\t\t\t\t\t:is-active=\"resolvedActive === item.key\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<image\r\n\t\t\t\t\t\tv-if=\"item.iconPath\"\r\n\t\t\t\t\t\t:src=\"resolvedActive === item.key ? item.selectedIconPath || item.iconPath : item.iconPath\"\r\n\t\t\t\t\t\tclass=\"tab-icon\"\r\n\t\t\t\t\t\tmode=\"widthFix\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<u-icon\r\n\t\t\t\t\t\tv-else-if=\"item.icon\"\r\n\t\t\t\t\t\t:name=\"resolvedActive === item.key ? item.activeIcon || item.icon : item.icon\"\r\n\t\t\t\t\t\t:size=\"iconSize\"\r\n\t\t\t\t\t\t:color=\"resolvedActive === item.key ? activeColor : color\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</slot> \r\n\t\t\t\t<text\r\n\t\t\t\t\tclass=\"tab-text\"\r\n\t\t\t\t\t:style=\"{ color: resolvedActive === item.key ? activeColor : color }\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{{ item.text }}\r\n\t\t\t\t</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view\r\n\t\t\tv-if=\"safeBottom > 0\"\r\n\t\t\tclass=\"safe-bottom\"\r\n\t\t\t:style=\"{ height: safeBottom + 'px' }\"\r\n\t\t/>\r\n\t</view>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { computed, ref } from 'vue'\r\n\r\ntype TabItem = {\r\n\tkey: string\r\n\ttext: string\r\n\ticon?: string\r\n\tactiveIcon?: string\r\n\tpath?: string\r\n\tpagePath?: string\r\n\ticonPath?: string\r\n\tselectedIconPath?: string\r\n}\r\n\r\ntype TabBarProps = {\r\n\titems: TabItem[]\r\n\tactive: string\r\n\tcolor?: string\r\n\tactiveColor?: string\r\n\tbackground?: string\r\n\ticonSize?: number | string\r\n\tborder?: boolean\r\n\thideSystemTabBar?: boolean\r\n}\r\n\r\nconst props = withDefaults(defineProps<TabBarProps>(), {\r\n\titems: () => [\r\n\t\t{\r\n\t\t\tkey: 'home',\r\n\t\t\ttext: '首页',\r\n\t\t\tpath: '/pages/home/index',\r\n\t\t\tpagePath: 'pages/home/index',\r\n\t\t\ticonPath: '/static/tabbar/home.png',\r\n\t\t\tselectedIconPath: '/static/tabbar/home-active.png'\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: 'brand',\r\n\t\t\ttext: '品牌',\r\n\t\t\tpath: '/pages/brand/index',\r\n\t\t\tpagePath: 'pages/brand/index',\r\n\t\t\ticonPath: '/static/tabbar/brand.png',\r\n\t\t\tselectedIconPath: '/static/tabbar/brand-active.png'\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: 'mine',\r\n\t\t\ttext: '我的',\r\n\t\t\tpath: '/pages/mine/index',\r\n\t\t\tpagePath: 'pages/mine/index',\r\n\t\t\ticonPath: '/static/tabbar/mine.png',\r\n\t\t\tselectedIconPath: '/static/tabbar/mine-active.png'\r\n\t\t}\r\n\t],\r\n\tactive: '',\r\n\tcolor: '#666666',\r\n\tactiveColor: '#007aff',\r\n\tbackground: '#ffffff',\r\n\ticonSize: 44,\r\n\tborder: true,\r\n\thideSystemTabBar: true\r\n})\r\n\r\nconst emit = defineEmits<{\r\n\t(event: 'change', key: string): void\r\n}>()\r\n\r\nconst getPlatformApi = () => ((globalThis as any).uni || (globalThis as any).wx || undefined)\r\n\r\nconst safeBottom = ref(0)\r\n\r\ntry {\r\n\tconst api = getPlatformApi()\r\n\tconst systemInfo = api?.getSystemInfoSync?.()\r\n\tsafeBottom.value =\r\n\t\tsystemInfo?.safeAreaInsets?.bottom ??\r\n\t\tMath.max(\r\n\t\t\t0,\r\n\t\t\t(systemInfo?.screenHeight ?? 0) -\r\n\t\t\t\t((systemInfo?.safeArea?.bottom ?? systemInfo?.screenHeight ?? 0))\r\n\t\t)\r\n} catch (error) {\r\n\tsafeBottom.value = 0\r\n}\r\n\r\nconst currentRoute = computed(() => {\r\n\ttry {\r\n\t\tconst pages = getCurrentPages()\r\n\t\treturn pages[pages.length - 1]?.route\r\n\t} catch (error) {\r\n\t\treturn ''\r\n\t}\r\n})\r\n\r\nconst normalizePath = (path?: string) => {\r\n\tif (!path) return ''\r\n\treturn path.startsWith('/') ? path : `/${path}`\r\n}\r\n\r\nconst resolveItemPath = (item: TabItem) => {\r\n\treturn normalizePath(item.path || item.pagePath)\r\n}\r\n\r\nconst resolvedActive = computed(() => {\r\n\tif (props.active) {\r\n\t\treturn props.active\r\n\t}\r\n\r\n\tconst currentPath = normalizePath(currentRoute.value)\r\n\tconst matched = props.items.find((item) => resolveItemPath(item) === currentPath)\r\n\treturn matched?.key ?? ''\r\n})\r\n\r\nconst hideSystemTabBar = () => {\r\n\tif (!props.hideSystemTabBar) return\r\n\ttry {\r\n\t\tgetPlatformApi()?.hideTabBar?.({ animation: false })\r\n\t} catch (error) {\r\n\t\t// ignore\r\n\t}\r\n}\r\n\r\nhideSystemTabBar()\r\n\r\nconst handleSelect = (item: TabItem) => {\r\n\tconst targetPath = resolveItemPath(item)\r\n\tconst currentPath = normalizePath(currentRoute.value)\r\n\tconst isCurrentRoute = currentPath && targetPath && currentPath === targetPath\r\n\tconst currentActive = resolvedActive.value\r\n\r\n\tif (currentActive === item.key) {\r\n\t\temit('change', item.key)\r\n\t\treturn\r\n\t}\r\n\r\n\temit('change', item.key)\r\n\r\n\tif (!targetPath || isCurrentRoute) {\r\n\t\treturn\r\n\t}\r\n\r\n\tconst api = getPlatformApi()\r\n\r\n\tconst tryNavigate = (method: 'reLaunch' | 'navigateTo') => {\r\n\t\tconst fn = api?.[method]\r\n\t\tif (typeof fn === 'function') {\r\n\t\t\ttry {\r\n\t\t\t\tfn({ url: targetPath })\r\n\t\t\t\treturn true\r\n\t\t\t} catch (error) {\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false\r\n\t}\r\n\r\n\ttry {\r\n\t\tapi?.switchTab?.({\r\n\t\t\turl: targetPath,\r\n\t\t\tfail: () => {\r\n\t\t\t\tif (tryNavigate('reLaunch')) return\r\n\t\t\t\ttryNavigate('navigateTo')\r\n\t\t\t}\r\n\t\t})\r\n\t} catch (error) {\r\n\t\tif (tryNavigate('reLaunch')) return\r\n\t\ttryNavigate('navigateTo')\r\n\t}\r\n}\r\n\r\ndefineExpose({\r\n\thideSystemTabBar\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.custom-tab-bar {\r\n\twidth: 100%;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tmargin-top: auto;\r\n\tbox-sizing: border-box;\r\n\tz-index: 95;\r\n\r\n\t&.has-border {\r\n\t\tborder-top: 1rpx solid rgba(0, 0, 0, 0.08);\r\n\t}\r\n}\r\n\r\n.tab-items {\r\n\tdisplay: flex;\r\n\talign-items: stretch;\r\n\tjustify-content: space-around;\r\n\tpadding: 12rpx 24rpx;\r\n\tgap: 12rpx;\r\n}\r\n\r\n.tab-item {\r\n\tflex: 1;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\tgap: 12rpx;\r\n\tpadding: 16rpx 0;\r\n\tborder-radius: 24rpx;\r\n\ttransition: all 0.2s;\r\n\r\n\t&.active {\r\n\t\tbackground: rgba(0, 122, 255, 0.08);\r\n\t}\r\n}\r\n\r\n.tab-text {\r\n\tfont-size: 24rpx;\r\n}\r\n\r\n.tab-icon {\r\n\twidth: 48rpx;\r\n\theight: 48rpx;\r\n}\r\n\r\n.safe-bottom {\r\n\twidth: 100%;\r\n}\r\n</style>\r\n\r\n","import Component from 'C:/Users/18185/Desktop/anydoorTripUniapp/anydoorTripUniapp/components/custom-tab-bar/index.vue'\nwx.createComponent(Component)"],"names":["ref","computed","_a","_b","Component"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyEA,UAAM,QAAQ;AAoCd,UAAM,OAAO;AAIb,UAAM,iBAAiB,MAAQ,WAAmB,OAAQ,WAAmB,MAAM;AAE7E,UAAA,aAAaA,kBAAI,CAAC;AAEpB,QAAA;AACH,YAAM,MAAM;AACN,YAAA,cAAa,gCAAK,sBAAL;AACnB,iBAAW,UACV,8CAAY,mBAAZ,mBAA4B,WAC5B,KAAK;AAAA,QACJ;AAAA,UACC,yCAAY,iBAAgB,QAC1B,8CAAY,aAAZ,mBAAsB,YAAU,yCAAY,iBAAgB;AAAA,MAAA;AAAA,aAEzD,OAAO;AACf,iBAAW,QAAQ;AAAA,IACpB;AAEM,UAAA,eAAeC,cAAAA,SAAS,MAAM;;AAC/B,UAAA;AACH,cAAM,QAAQ;AACd,gBAAOC,MAAA,MAAM,MAAM,SAAS,CAAC,MAAtB,gBAAAA,IAAyB;AAAA,eACxB,OAAO;AACR,eAAA;AAAA,MACR;AAAA,IAAA,CACA;AAEK,UAAA,gBAAgB,CAAC,SAAkB;AACxC,UAAI,CAAC;AAAa,eAAA;AAClB,aAAO,KAAK,WAAW,GAAG,IAAI,OAAO,IAAI,IAAI;AAAA,IAAA;AAGxC,UAAA,kBAAkB,CAAC,SAAkB;AAC1C,aAAO,cAAc,KAAK,QAAQ,KAAK,QAAQ;AAAA,IAAA;AAG1C,UAAA,iBAAiBD,cAAAA,SAAS,MAAM;AACrC,UAAI,MAAM,QAAQ;AACjB,eAAO,MAAM;AAAA,MACd;AAEM,YAAA,cAAc,cAAc,aAAa,KAAK;AAC9C,YAAA,UAAU,MAAM,MAAM,KAAK,CAAC,SAAS,gBAAgB,IAAI,MAAM,WAAW;AAChF,cAAO,mCAAS,QAAO;AAAA,IAAA,CACvB;AAED,UAAM,mBAAmB,MAAM;;AAC9B,UAAI,CAAC,MAAM;AAAkB;AACzB,UAAA;AACH,SAAAE,OAAAD,MAAA,eAAkB,MAAlB,gBAAAA,IAAkB,eAAlB,gBAAAC,IAAA,KAAAD,KAA+B,EAAE,WAAW,MAAO;AAAA,eAC3C,OAAO;AAAA,MAEhB;AAAA,IAAA;AAGgB;AAEX,UAAA,eAAe,CAAC,SAAkB;;AACjC,YAAA,aAAa,gBAAgB,IAAI;AACjC,YAAA,cAAc,cAAc,aAAa,KAAK;AAC9C,YAAA,iBAAiB,eAAe,cAAc,gBAAgB;AACpE,YAAM,gBAAgB,eAAe;AAEjC,UAAA,kBAAkB,KAAK,KAAK;AAC1B,aAAA,UAAU,KAAK,GAAG;AACvB;AAAA,MACD;AAEK,WAAA,UAAU,KAAK,GAAG;AAEnB,UAAA,CAAC,cAAc,gBAAgB;AAClC;AAAA,MACD;AAEA,YAAM,MAAM;AAEN,YAAA,cAAc,CAAC,WAAsC;AACpD,cAAA,KAAK,2BAAM;AACb,YAAA,OAAO,OAAO,YAAY;AACzB,cAAA;AACA,eAAA,EAAE,KAAK,WAAA,CAAY;AACf,mBAAA;AAAA,mBACC,OAAO;AACR,mBAAA;AAAA,UACR;AAAA,QACD;AACO,eAAA;AAAA,MAAA;AAGJ,UAAA;AACH,SAAAA,MAAA,2BAAK,cAAL,gBAAAA,IAAA,UAAiB;AAAA,UAChB,KAAK;AAAA,UACL,MAAM,MAAM;AACX,gBAAI,YAAY,UAAU;AAAG;AAC7B,wBAAY,YAAY;AAAA,UACzB;AAAA,QAAA;AAAA,eAEO,OAAO;AACf,YAAI,YAAY,UAAU;AAAG;AAC7B,oBAAY,YAAY;AAAA,MACzB;AAAA,IAAA;AAGY,aAAA;AAAA,MACZ;AAAA,IAAA,CACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzND,GAAG,gBAAgBE,SAAS;"}